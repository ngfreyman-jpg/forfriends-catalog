<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ForFriends — Admin</title>
  <link rel="icon" href="../favicon.ico">
  <style>
    :root{--bg:#0f1115;--card:#161a22;--muted:#8b95a7;--fg:#e6e6e6;--accent:#5b8cff;--red:#ff6b6b;--green:#32d296}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .card{background:var(--card);border:1px solid #242a36;border-radius:14px}
    .login{max-width:420px;margin:72px auto;padding:28px}
    h1,h2,h3{margin:0 0 16px}
    h1{font-size:22px}
    h2{font-size:18px}
    label{display:block;margin:10px 0 6px;color:#cfd6e4}
    input,select,textarea{width:100%;padding:10px 12px;background:#0c0f14;color:var(--fg);border:1px solid #263142;border-radius:10px;outline:none}
    input:focus,select:focus,textarea:focus{border-color:#355aa8}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
    .btn.secondary{background:#263142}
    .btn.red{background:var(--red)}
    .btn.green{background:var(--green);color:#0b121b}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .muted{color:var(--muted)}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .tabs{display:flex;gap:8px;margin-bottom:16px}
    .tab{padding:8px 12px;border-radius:999px;background:#1a2030;border:1px solid #2a3347;color:#cdd6ea;cursor:pointer}
    .tab.active{background:#243255;border-color:#365099;color:#fff}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:14px}
    .section{padding:16px}
    .list{display:flex;flex-direction:column;gap:8px}
    .item{display:grid;grid-template-columns:90px 1fr auto;gap:12px;align-items:center;padding:10px;border:1px solid #273246;border-radius:10px;background:#111520}
    .item img{width:90px;height:70px;object-fit:cover;border-radius:8px;background:#0b1017}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#111522;border:1px solid #2b3550;padding:2px 6px;border-radius:6px}
    .empty{padding:18px;border:1px dashed #34405a;border-radius:12px;color:#a8b2c7;background:#0e131d}
    .footer{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
    .danger{color:#ffb3b3}
    .ok{color:#b6f5c4}
    .hide{display:none !important}
    @media (max-width:960px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">

  <!-- LOGIN -->
  <div id="loginCard" class="card login">
    <h1>Вход в админку</h1>
    <p class="muted">Введите логин и пароль владельца.</p>
    <form id="loginForm">
      <label>Логин</label>
      <input id="login" autocomplete="username" placeholder="логин" required />
      <label>Пароль</label>
      <input id="password" type="password" autocomplete="current-password" placeholder="пароль" required />
      <div class="footer">
        <button class="btn" type="submit">Войти</button>
      </div>
      <p id="loginErr" class="danger hide">Неверные логин или пароль.</p>
      <p id="loginHint" class="muted"></p>
    </form>
  </div>

  <!-- APP -->
  <div id="app" class="card hide">
    <div class="topbar section">
      <div>
        <h1>Админка ForFriends</h1>
        <div class="muted" id="statusText">Загрузка данных…</div>
      </div>
      <div>
        <button id="logoutBtn" class="btn secondary">Выйти</button>
      </div>
    </div>

    <div class="tabs section">
      <button class="tab active" data-tab="cats">Категории</button>
      <button class="tab" data-tab="goods">Товары</button>
      <button class="tab" data-tab="sync">Внести изменения</button>
    </div>

    <!-- Категории -->
    <div id="tab-cats" class="section">
      <div class="row">
        <div>
          <h2>Список</h2>
          <div id="catList" class="list"></div>
        </div>
        <div>
          <h2>Новая категория</h2>
          <label>Название</label>
          <input id="catTitle" placeholder="Например: Худи / Зип-худи" />
          <div class="footer">
            <button id="addCatBtn" class="btn">Добавить</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Товары -->
    <div id="tab-goods" class="section hide">
      <div class="row">
        <div>
          <h2>Список</h2>
          <div id="prodList" class="list"></div>
        </div>
        <div>
          <h2>Форма товара</h2>
          <label>ID (артикул)</label>
          <input id="p_id" placeholder="3028083" />
          <label>Название</label>
          <input id="p_title" placeholder="Худи Maison Mihara…" />
          <div class="row">
            <div>
              <label>Цена (₽)</label>
              <input id="p_price" type="number" min="0" step="1" />
            </div>
            <div>
              <label>Категория</label>
              <select id="p_cat"></select>
            </div>
          </div>
          <label>Фото (URL или путь)</label>
          <input id="p_photo" placeholder="images/hoodie1.webp" />
          <label>Ссылка (опционально)</label>
          <input id="p_link" placeholder="https://…" />
          <label>Описание (опционально)</label>
          <textarea id="p_desc" rows="4"></textarea>
          <div class="footer">
            <button id="saveProdBtn" class="btn green">Сохранить/Добавить</button>
            <button id="resetProdBtn" class="btn secondary" type="button">Очистить</button>
          </div>
          <p class="muted">Подсказка: клик по товару в списке заполнит форму для редактирования.</p>
        </div>
      </div>
    </div>

    <!-- Внести изменения -->
    <div id="tab-sync" class="section hide">
      <h2>Изменения</h2>
      <p class="muted">Ручной синк включён: текущие категории и товары будут отправлены на сервер и сразу попадут в каталог. Коммит в GitHub выполняется в фоне.</p>

      <div class="footer" style="justify-content:flex-start">
        <button id="btn-push" class="btn">Внести изменения</button>
      </div>

      <h3 style="margin-top:18px">Статус</h3>
      <pre id="log" class="muted" style="white-space:pre-wrap;background:#0f1420;border:1px solid #293553;border-radius:12px;padding:12px;max-height:220px;overflow:auto"></pre>
    </div>

  </div>
</div>

<script src="./local-admin.js"></script>
</body>
</html>
